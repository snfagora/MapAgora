<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>getting-IRS • MapAgora</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="getting-IRS">
<meta property="og:description" content="MapAgora">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">MapAgora</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/getting-IRS.html">getting-IRS</a>
    </li>
    <li>
      <a href="../articles/getting-social-media-handles.html">getting-social-media-handles</a>
    </li>
    <li>
      <a href="../articles/getting-websites.html">aboutpages</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/snfagora/MapAgora/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="getting-IRS_files/header-attrs-2.9/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>getting-IRS</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/snfagora/MapAgora/blob/master/vignettes/getting-IRS.Rmd"><code>vignettes/getting-IRS.Rmd</code></a></small>
      <div class="hidden name"><code>getting-IRS.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/">devtools</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span>

<span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span><span class="op">(</span><span class="st">"snfagora/MapAgora"</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">MapAgora</span><span class="op">)</span></code></pre></div>
<div id="irs-filings" class="section level2">
<h2 class="hasAnchor">
<a href="#irs-filings" class="anchor"></a>IRS filings</h2>
<p>IRS data provide comprehensive demographic and financial information on civic organizations.</p>
<div id="load-the-irs-index" class="section level3">
<h3 class="hasAnchor">
<a href="#load-the-irs-index" class="anchor"></a>Load the IRS index</h3>
<p>To begin, load the IRS index for a selected year.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># load 2018 index file from the IRS Amazon Web Server</span>
<span class="va">idx_2018</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/import_idx.html">import_idx</a></span><span class="op">(</span><span class="fl">2018</span><span class="op">)</span></code></pre></div>
</div>
<div id="get-the-aws-url-for-the-filing-of-interest" class="section level3">
<h3 class="hasAnchor">
<a href="#get-the-aws-url-for-the-filing-of-interest" class="anchor"></a>Get the AWS URL for the filing of interest</h3>
<p>Digitized 990 data are available as XML files in an Amazon Web Server (AWS) repository. The yearly index file organizes these files. The year, in this case, refers to the year the IRS processed the file. For example, all the files in the 2018 index were processed in 2018. However, the tax filing itself can be from any previous date. This discrepancy makes it challenging to locate a specific filing for a given organization and year.</p>
<p>To remedy this, we rebuilt a comprehensive index file for this package. This index, included in the package, contains the additional fields <code>TaxPeriodBeginDt,</code> <code>TaxPeriodEndDt,</code> and (importantly) <code>Tax_Year.</code> <code>Tax_Year</code> refers to the tax year of the 990 form the organization submitted, but <code>IRS_Year</code> refers to the year the IRS converted the submission into digitized form. Note that organizations can choose to adhere to either a calendar or a fiscal year. <code>TaxPeriodBeginDt</code> and <code>TaxPeriodEndDt</code> refer to the beginning and end dates of that filing’s year.</p>
<p>The location of a given digitized filing can be found with the <code>get_aws_url</code> function. This function returns the location of the XML file in the AWS repository.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># this organization's 2018 990 filing can be found here</span>
<span class="va">aws_url</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_aws_url.html">get_aws_url</a></span><span class="op">(</span><span class="st">"061553389"</span>, <span class="fl">2018</span><span class="op">)</span></code></pre></div>
</div>
<div id="get-the-xml-file-for-a-given-aws-url" class="section level3">
<h3 class="hasAnchor">
<a href="#get-the-xml-file-for-a-given-aws-url" class="anchor"></a>Get the XML file for a given AWS URL</h3>
<p>To parse fields from filings, first load an XML file of interest. Note that because this function calls <code><a href="../reference/get_aws_url.html">get_aws_url()</a></code>, there is no need to find the URL location. The first step for most uses of this package is <code><a href="../reference/get_990.html">get_990()</a></code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## load an XML for this organization's 2018 filing.</span>
<span class="va">xml_root</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_990.html">get_990</a></span><span class="op">(</span><span class="st">"221405099"</span>, year <span class="op">=</span> <span class="fl">2018</span><span class="op">)</span>

<span class="co">## see name of this organization</span>
<span class="va">organization_name</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_organization_name_990.html">get_organization_name_990</a></span><span class="op">(</span><span class="st">"221405099"</span><span class="op">)</span></code></pre></div>
</div>
<div id="get-a-specific-field-from-a-filing" class="section level3">
<h3 class="hasAnchor">
<a href="#get-a-specific-field-from-a-filing" class="anchor"></a>Get a specific field from a filing</h3>
<p>Nonprofit organizations can file different versions of the 990 form depending on their specific status. Knowledge of the specific form type is not required to extract values with this package, but the type of a given form can be seen with the following:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## see form type of a filing</span>
<span class="va">filing_type</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_filing_type_990.html">get_filing_type_990</a></span><span class="op">(</span><span class="va">xml_root</span><span class="op">)</span></code></pre></div>
<p>Available parsed fields can be seen in the <code>irs_fields</code> table. The <code>package_variable</code> column lists the variable names to be used in functions. Other columns show both the XML path and the physical form location for that variable. These variables are grouped by category and subcategory.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## see available variables</span>
<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">irs_fields</span><span class="op">)</span>

<span class="co">## get total revenue for this org</span>
<span class="va">revenue_total</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_single_value_990.html">get_single_value_990</a></span><span class="op">(</span><span class="va">xml_root</span>, <span class="st">"revenue_total"</span><span class="op">)</span></code></pre></div>
</div>
<div id="see-related-entities" class="section level3">
<h3 class="hasAnchor">
<a href="#see-related-entities" class="anchor"></a>See related entities</h3>
<p>Organizations report related entities on Form 990 Schedule R. The EINs of related organizations can be found with <code><a href="../reference/get_scheduleR.html">get_scheduleR()</a></code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## see related EINs for a given EIN and given tax year filing.</span>
<span class="va">related_eins</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_scheduleR.html">get_scheduleR</a></span><span class="op">(</span><span class="st">"061553389"</span>, <span class="fl">2018</span><span class="op">)</span></code></pre></div>
<p>This function returns multiple values if multiple related organizations are reported and indicates if no related organizations are reported.</p>
</div>
<div id="extract-mission-and-description-texts" class="section level3">
<h3 class="hasAnchor">
<a href="#extract-mission-and-description-texts" class="anchor"></a>Extract mission and description texts</h3>
<p>Organizations report descriptive information about their primary mission and main activities in 990 filings. The concatenated responses to these fields can be extracted.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># mission statement</span>
<span class="va">mission_desc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_value_990.html">get_value_990</a></span><span class="op">(</span><span class="va">xml_root</span>, <span class="st">"mission_desc"</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># program description</span>
<span class="va">program_desc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_value_990.html">get_value_990</a></span><span class="op">(</span><span class="va">xml_root</span>, <span class="st">"program_desc"</span><span class="op">)</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Milan de Vries, Jae Yeon Kim.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
